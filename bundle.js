(()=>{"use strict";var n={56:(n,t,e)=>{n.exports=function(n){var t=e.nc;t&&n.setAttribute("nonce",t)}},72:n=>{var t=[];function e(n){for(var e=-1,o=0;o<t.length;o++)if(t[o].identifier===n){e=o;break}return e}function o(n,o){for(var i={},r=[],d=0;d<n.length;d++){var c=n[d],s=o.base?c[0]+o.base:c[0],l=i[s]||0,f="".concat(s," ").concat(l);i[s]=l+1;var p=e(f),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(u);else{var m=a(u,o);o.byIndex=d,t.splice(d,0,{identifier:f,updater:m,references:1})}r.push(f)}return r}function a(n,t){var e=t.domAPI(t);return e.update(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap&&t.supports===n.supports&&t.layer===n.layer)return;e.update(n=t)}else e.remove()}}n.exports=function(n,a){var i=o(n=n||[],a=a||{});return function(n){n=n||[];for(var r=0;r<i.length;r++){var d=e(i[r]);t[d].references--}for(var c=o(n,a),s=0;s<i.length;s++){var l=e(i[s]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=c}}},113:n=>{n.exports=function(n,t){if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},208:(n,t,e)=>{e.d(t,{A:()=>d});var o=e(601),a=e.n(o),i=e(314),r=e.n(i)()(a());r.push([n.id,"body {\n    font-family: Arial, sans-serif;\n    margin: 0;\n    background: #f5f5f5;\n}\n\n.container {\n    max-width: 800px;\n    margin: 20px auto;\n    padding: 20px;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n}\n\nh1 {\n    margin-top: 0;\n    text-align: center;\n}\n\nbutton {\n    cursor: pointer;\n    padding: 8px 14px;\n    border: none;\n    border-radius: 4px;\n    background: #3498db;\n    color: white;\n    font-size: 14px;\n}\n\nbutton:hover {\n    background: #2980b9;\n}\n\n.ticket-list {\n    margin-top: 20px;\n}\n\n.ticket {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 10px;\n    border-bottom: 1px solid #ddd;\n}\n\n.ticket .left {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n}\n\n.ticket span {\n    cursor: pointer;\n}\n\n.ticket button {\n    margin-left: 5px;\n    background: transparent;\n    color: #333;\n    font-size: 16px;\n    border: none;\n    cursor: pointer;\n}\n\n.ticket button:hover {\n    color: #2980b9;\n}\n\n.ticket button:nth-child(3):hover { \n    color: #2980b9;\n}\n\n.ticket button:nth-child(4):hover { \n    color: red;\n}\n\n/* Модалки */\n.modal {\n    display: none;\n    position: fixed;\n    z-index: 999;\n    left: 0; top: 0;\n    width: 100%; height: 100%;\n    background: rgba(0,0,0,0.5);\n    justify-content: center;\n    align-items: center;\n}\n\n.modal-content {\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    width: 300px;\n}\n\n.modal-content h2 {\n    margin-top: 0;\n}\n\n.modal-content input,\n.modal-content textarea {\n    width: 100%;\n    margin: 8px 0;\n    padding: 8px;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n}\n\n.modal-buttons {\n    display: flex;\n    justify-content: flex-end;\n    gap: 10px;\n}\n\n/* Стили для спиннера */\n.loadingio-spinner-spinner-2by998twmg8 {\n    width: 40px; \n    height: 40px;\n    display: none; \n    overflow: hidden;\n    background: #ffffff;\n    margin: 20px auto;\n}\n\n.ldio-yzaezf3dcmj {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    transform: translateZ(0) scale(0.2); \n    backface-visibility: hidden;\n    transform-origin: 0 0;\n}\n\n.ldio-yzaezf3dcmj div {\n    left: 91px;\n    top: 39px;\n    position: absolute;\n    animation: ldio-yzaezf3dcmj linear 1.8181818181818181s infinite;\n    background: #1c79c0;\n    width: 18px;\n    height: 42px;\n    border-radius: 9px / 18.48px;\n    transform-origin: 9px 61px;\n}\n\n.ldio-yzaezf3dcmj div:nth-child(1) {\n    transform: rotate(0deg);\n    animation-delay: -1.711229946524064s;\n    background: #1c79c0;\n}\n.ldio-yzaezf3dcmj div:nth-child(2) {\n    transform: rotate(21.176470588235293deg);\n    animation-delay: -1.60427807486631s;\n    background: #0dd3ff;\n}\n.ldio-yzaezf3dcmj div:nth-child(3) {\n    transform: rotate(42.35294117647059deg);\n    animation-delay: -1.497326203208556s;\n    background: #0389ff;\n}\n.ldio-yzaezf3dcmj div:nth-child(4) {\n    transform: rotate(63.529411764705884deg);\n    animation-delay: -1.390374331550802s;\n    background: #1c79c0;\n}\n.ldio-yzaezf3dcmj div:nth-child(5) {\n    transform: rotate(84.70588235294117deg);\n    animation-delay: -1.283422459893048s;\n    background: #0dd3ff;\n}\n.ldio-yzaezf3dcmj div:nth-child(6) {\n    transform: rotate(105.88235294117646deg);\n    animation-delay: -1.176470588235294s;\n    background: #0389ff;\n}\n.ldio-yzaezf3dcmj div:nth-child(7) {\n    transform: rotate(127.05882352941177deg);\n    animation-delay: -1.06951871657754s;\n    background: #1c79c0;\n}\n.ldio-yzaezf3dcmj div:nth-child(8) {\n    transform: rotate(148.23529411764707deg);\n    animation-delay: -0.962566844919786s;\n    background: #0dd3ff;\n}\n.ldio-yzaezf3dcmj div:nth-child(9) {\n    transform: rotate(169.41176470588235deg);\n    animation-delay: -0.855614973262032s;\n    background: #0389ff;\n}\n.ldio-yzaezf3dcmj div:nth-child(10) {\n    transform: rotate(190.58823529411765deg);\n    animation-delay: -0.748663101604278s;\n    background: #1c79c0;\n}\n.ldio-yzaezf3dcmj div:nth-child(11) {\n    transform: rotate(211.76470588235293deg);\n    animation-delay: -0.641711229946524s;\n    background: #0dd3ff;\n}\n.ldio-yzaezf3dcmj div:nth-child(12) {\n    transform: rotate(232.94117647058823deg);\n    animation-delay: -0.53475935828877s;\n    background: #0389ff;\n}\n.ldio-yzaezf3dcmj div:nth-child(13) {\n    transform: rotate(254.11764705882354deg);\n    animation-delay: -0.427807486631016s;\n    background: #1c79c0;\n}\n.ldio-yzaezf3dcmj div:nth-child(14) {\n    transform: rotate(275.29411764705884deg);\n    animation-delay: -0.320855614973262s;\n    background: #0dd3ff;\n}\n.ldio-yzaezf3dcmj div:nth-child(15) {\n    transform: rotate(296.47058823529414deg);\n    animation-delay: -0.213903743315508s;\n    background: #0389ff;\n}\n.ldio-yzaezf3dcmj div:nth-child(16) {\n    transform: rotate(317.6470588235294deg);\n    animation-delay: -0.106951871657754s;\n    background: #1c79c0;\n}\n.ldio-yzaezf3dcmj div:nth-child(17) {\n    transform: rotate(338.8235294117647deg);\n    animation-delay: 0s;\n    background: #0dd3ff;\n}\n\n@keyframes ldio-yzaezf3dcmj {\n    0% { opacity: 1 }\n    100% { opacity: 0 }\n}\n\n.ldio-yzaezf3dcmj div { box-sizing: content-box; }\n\n.ticket-list {\n    margin-top: 20px;\n    position: relative;\n}",""]);const d=r},314:n=>{n.exports=function(n){var t=[];return t.toString=function(){return this.map(function(t){var e="",o=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),o&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=n(t),o&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e}).join("")},t.i=function(n,e,o,a,i){"string"==typeof n&&(n=[[null,n,void 0]]);var r={};if(o)for(var d=0;d<this.length;d++){var c=this[d][0];null!=c&&(r[c]=!0)}for(var s=0;s<n.length;s++){var l=[].concat(n[s]);o&&r[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),e&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=e):l[2]=e),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),t.push(l))}},t}},540:n=>{n.exports=function(n){var t=document.createElement("style");return n.setAttributes(t,n.attributes),n.insert(t,n.options),t}},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var t={};n.exports=function(n,e){var o=function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}t[n]=e}return t[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=n.insertStyleElement(n);return{update:function(e){!function(n,t,e){var o="";e.supports&&(o+="@supports (".concat(e.supports,") {")),e.media&&(o+="@media ".concat(e.media," {"));var a=void 0!==e.layer;a&&(o+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),o+=e.css,a&&(o+="}"),e.media&&(o+="}"),e.supports&&(o+="}");var i=e.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,n,t.options)}(t,n,e)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)}}}}},t={};function e(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={id:o,exports:{}};return n[o](i,i.exports,e),i.exports}e.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},e.d=(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.nc=void 0;var o=e(72),a=e.n(o),i=e(825),r=e.n(i),d=e(659),c=e.n(d),s=e(56),l=e.n(s),f=e(540),p=e.n(f),u=e(113),m=e.n(u),y=e(208),h={};h.styleTagTransform=m(),h.setAttributes=l(),h.insert=c().bind(null,"head"),h.domAPI=r(),h.insertStyleElement=p(),a()(y.A,h),y.A&&y.A.locals&&y.A.locals;const g="http://localhost:7070",v=document.getElementById("ticketList"),b=document.getElementById("addTicketBtn"),k=document.getElementById("ticketModal"),x=document.getElementById("saveBtn"),w=document.getElementById("cancelBtn"),z=document.getElementById("confirmModal"),E=document.getElementById("confirmDelete"),j=document.getElementById("cancelDelete"),T=document.getElementById("ticketDetailsModal"),I=document.getElementById("closeDetails"),$=document.getElementById("shortDesc"),D=document.getElementById("longDesc"),B=document.getElementById("detailsTitle"),L=document.getElementById("detailsDesc"),C=document.getElementById("loading");let M=null;async function A(){C.style.display="block",console.log("Попытка загрузки тикетов с",`${g}/tickets`);try{const n=await fetch(`${g}/tickets`,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("Статус ответа:",n.status,"OK:",n.ok),!n.ok)throw new Error(`Ошибка HTTP: ${n.status} - ${n.statusText}`);const t=await n.json();if(console.log("Полученные тикеты:",t),!Array.isArray(t))throw new Error("Неверный формат ответа API: ожидается массив");!function(n){console.log("Рендеринг тикетов:",n),v.innerHTML="",n.length?n.forEach(n=>{const t=document.createElement("div");t.className="ticket",t.dataset.id=n.id||"",t.innerHTML=`\n            <div class="left">\n                <input type="checkbox" ${n.status?"checked":""}>\n                <span onclick="showDetails('${n.id}')">${n.name||"Без названия"}</span>\n                <button onclick="editTicket('${n.id}')">✎</button>\n                <button onclick="showConfirm('${n.id}')">×</button>\n            </div>\n            <span>${new Date(n.created||Date.now()).toLocaleString("ru-RU")}</span>\n        `,v.appendChild(t)}):v.innerHTML="<p>Нет тикетов.</p>"}(t)}catch(n){console.error("Ошибка загрузки тикетов:",n.message),v.innerHTML=`<p>Не удалось загрузить тикеты. Ошибка: ${n.message}. Проверьте сервер на ${g}.</p>`}finally{C.style.display="none"}}b.addEventListener("click",()=>{console.log("Открытие модалки добавления"),$.value="",D.value="",M=null,k.style.display="flex"}),window.editTicket=async n=>{console.log("Редактирование тикета, ID:",n),C.style.display="block";try{const t=await fetch(`${g}/tickets/${n}`);if(!t.ok)throw new Error(`Ошибка HTTP: ${t.status} - ${t.statusText}`);const e=await t.json();if(console.log("Данные тикета для редактирования:",e),!e||!e.name)throw new Error("Неверные данные тикета");M=n,$.value=e.name,D.value=e.description||"",k.style.display="flex"}catch(n){console.error("Ошибка загрузки тикета для редактирования:",n.message),alert("Не удалось загрузить тикет для редактирования.")}finally{C.style.display="none"}},x.addEventListener("click",async()=>{console.log("Сохранение тикета, currentTicketId:",M);const n=$.value.trim(),t=D.value.trim();if(!n)return alert("Введите краткое описание!");C.style.display="block";try{let e;if(M)e=await fetch(`${g}/tickets/${M}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,description:t})});else{e=await fetch(`${g}/tickets`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,description:t})});const o=await e.json();M=o.id}if(!e.ok)throw new Error(`Ошибка: ${e.status} - ${e.statusText}`);k.style.display="none",A()}catch(n){console.error("Ошибка сохранения тикета:",n.message),alert("Не удалось сохранить тикет. Проверьте консоль.")}finally{C.style.display="none"}}),w.addEventListener("click",()=>{k.style.display="none"}),window.showConfirm=n=>{console.log("Подтверждение удаления, ID:",n),M=n,M?z.style.display="flex":console.error("ID тикета не определён")},E.addEventListener("click",async()=>{if(console.log("Удаление тикета, ID:",M),M){C.style.display="block";try{const n=await fetch(`${g}/tickets/${M}`,{method:"DELETE"});if(!n.ok)throw new Error(`Ошибка: ${n.status} - ${n.statusText}`);z.style.display="none",A()}catch(n){console.error("Ошибка удаления тикета:",n.message),alert("Не удалось удалить тикет.")}finally{C.style.display="none"}}}),j.addEventListener("click",()=>{z.style.display="none"}),window.showDetails=async n=>{console.log("Просмотр деталей, ID:",n),C.style.display="block";try{if(!n)throw new Error("ID тикета не указан");const t=await fetch(`${g}/tickets/${n}`);if(console.log("Статус ответа для деталей:",t.status,"OK:",t.ok),!t.ok)throw new Error(`Ошибка HTTP: ${t.status} - ${t.statusText}`);const e=await t.json();if(console.log("Данные тикета:",e),!e||!e.name)throw new Error("Неверные данные тикета");B.textContent=e.name,L.textContent=e.description||"Нет подробного описания",T.style.display="flex"}catch(n){console.error("Ошибка загрузки деталей:",n.message),alert("Не удалось загрузить детали тикета.")}finally{C.style.display="none"}},I.addEventListener("click",()=>{T.style.display="none"}),[k,z,T].forEach(n=>{n.addEventListener("click",t=>{t.target===n&&(n.style.display="none")})}),A()})();